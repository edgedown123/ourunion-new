# 우리노동조합 PWA 패치 (테스트용)

이 ZIP은 **기존 프로젝트에 '덮어쓰기(복사)'로 적용**하는 패치입니다.

## 1) 적용 방법 (초보자용)
1. 지금 사용 중인 프로젝트 폴더(원본 코드)를 열어주세요.
2. 이 ZIP 파일을 풀고, 안에 들어있는 파일/폴더를 **그대로 원본 프로젝트에 복사**해서 **덮어쓰기** 합니다.
3. 터미널에서 다음 실행:
   - `npm install`
   - `npm run dev`

## 2) PWA 설치(조합원 테스트)
안드로이드 크롬에서 사이트 접속 →
- 메뉴(⋮) → **홈 화면에 추가**
- 첫 화면에서 **알림 허용**(팝업 뜨면 허용)

## 3) 관리자에서 테스트 알림
관리자 커맨드 센터 → **푸시 알림(PWA)** 탭 →
- **알림 켜기**
- **테스트 알림 보내기**

## 4) "새 게시글 등록 시 알림" 테스트(현재 단계)
현재 패치에는 2가지가 있습니다.

### A. 앱이 열려있는 동안(테스트용): ✅ 바로 동작
- Supabase Realtime로 posts INSERT를 감지해서 알림을 띄웁니다.
- 조합원이 앱(홈화면 PWA)을 켜둔 상태라면 새 글 등록 즉시 알림이 뜹니다.

### B. 앱이 꺼져있어도 뜨는 '진짜 푸시'(운영용): ⛳ 추가 설정 필요
브라우저가 꺼져 있어도 알림을 보내려면,
- VAPID 공개키/개인키 생성
- (서버 또는 Supabase Edge Function)에서 Web Push 발송
이 필요합니다.

패치에는 준비만 해둔 상태입니다:
- 환경변수: `VITE_VAPID_PUBLIC_KEY`
- 구독 저장(선택): 관리자 탭의 **웹 푸시 구독 저장**
- Supabase 테이블 SQL: `sql/001_push_subscriptions.sql`

원하시면 다음 단계로 **Supabase Edge Function 기반 '진짜 푸시'**까지 이어서 패치해드릴게요.
(이 단계는 배포/키 생성까지 같이 가야 해서, 한 번만 더 진행하면 완성됩니다.)
